<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CoinTicker Live - Real-time Crypto Trading Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.2.1/dist/chartjs-chart-financial.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: #0b0e11;
        color: #eaecef;
        overflow-x: hidden;
      }

      /* ÏÉÅÎã® Ìó§Îçî */
      .header {
        background: #1e2329;
        border-bottom: 1px solid #2b3139;
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.5em;
        font-weight: 700;
        color: #f0b90b;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .header-nav {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .nav-item {
        color: #848e9c;
        text-decoration: none;
        padding: 8px 15px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .nav-item:hover,
      .nav-item.active {
        color: #eaecef;
        background: #2b3139;
      }

      /* Í∞ÄÍ≤© Ìã∞Ïª§ Î∞î */
      .ticker-bar {
        background: #1e2329;
        border-bottom: 1px solid #2b3139;
        padding: 10px 20px;
        display: flex;
        gap: 30px;
        overflow-x: auto;
        white-space: nowrap;
      }

      .ticker-bar::-webkit-scrollbar {
        height: 4px;
      }

      .ticker-bar::-webkit-scrollbar-track {
        background: #0b0e11;
      }

      .ticker-bar::-webkit-scrollbar-thumb {
        background: #2b3139;
        border-radius: 2px;
      }

      .ticker-item {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .ticker-symbol {
        color: #848e9c;
        font-size: 0.85em;
      }

      .ticker-price {
        font-weight: 600;
        font-size: 1em;
      }

      .ticker-change {
        font-size: 0.9em;
        padding: 2px 8px;
        border-radius: 3px;
      }

      .ticker-change.up {
        color: #0ecb81;
        background: rgba(14, 203, 129, 0.1);
      }

      .ticker-change.down {
        color: #f6465d;
        background: rgba(246, 70, 93, 0.1);
      }

      /* Î©îÏù∏ Î†àÏù¥ÏïÑÏõÉ */
      .main-layout {
        display: grid;
        grid-template-columns: 280px 1fr 320px;
        gap: 1px;
        background: #2b3139;
        min-height: calc(100vh - 100px);
      }

      /* ÏôºÏ™Ω ÏÇ¨Ïù¥ÎìúÎ∞î - ÎßàÏºì Î¶¨Ïä§Ìä∏ */
      .market-list {
        background: #1e2329;
        padding: 15px;
        overflow-y: auto;
      }

      .market-search {
        width: 100%;
        padding: 10px;
        background: #2b3139;
        border: 1px solid #474d57;
        border-radius: 4px;
        color: #eaecef;
        margin-bottom: 15px;
      }

      .market-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        border-bottom: 1px solid #2b3139;
        padding-bottom: 10px;
      }

      .market-tab {
        padding: 5px 10px;
        color: #848e9c;
        cursor: pointer;
        font-size: 0.9em;
        border-bottom: 2px solid transparent;
      }

      .market-tab.active {
        color: #f0b90b;
        border-bottom-color: #f0b90b;
      }

      .market-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .market-item:hover {
        background: #2b3139;
      }

      .market-item.active {
        background: #2b3139;
      }

      .market-symbol {
        font-weight: 600;
        font-size: 0.95em;
      }

      .market-price {
        text-align: right;
      }

      .market-price-value {
        font-size: 0.95em;
      }

      /* Ï§ëÏïô - Ï∞®Ìä∏ & Îâ¥Ïä§ */
      .chart-section {
        background: #1e2329;
        display: flex;
        flex-direction: column;
      }

      .chart-header {
        padding: 15px 20px;
        border-bottom: 1px solid #2b3139;
      }

      .chart-symbol {
        font-size: 1.5em;
        font-weight: 700;
        margin-bottom: 10px;
      }

      .chart-stats {
        display: flex;
        gap: 30px;
        font-size: 0.9em;
      }

      .stat-item {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }

      .stat-label {
        color: #848e9c;
        font-size: 0.85em;
      }

      .stat-value {
        font-weight: 600;
      }

      .chart-container {
        padding: 20px;
        flex: 1;
        position: relative;
      }

      .chart-timeframe {
        display: flex;
        gap: 10px;
        padding: 10px 20px;
        border-bottom: 1px solid #2b3139;
      }

      .timeframe-btn {
        padding: 5px 12px;
        background: transparent;
        border: none;
        color: #848e9c;
        cursor: pointer;
        border-radius: 4px;
        font-size: 0.9em;
      }

      .timeframe-btn:hover {
        background: #2b3139;
      }

      .timeframe-btn.active {
        background: #2b3139;
        color: #f0b90b;
      }

      /* Îâ¥Ïä§ ÏÑπÏÖò */
      .news-section {
        background: #1e2329;
        padding: 20px;
        margin-top: 1px;
        max-height: 400px;
        overflow-y: auto;
      }

      .news-title {
        font-size: 1.1em;
        font-weight: 700;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .news-item {
        padding: 15px;
        background: #2b3139;
        border-radius: 6px;
        margin-bottom: 10px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .news-item:hover {
        background: #343a46;
      }

      .news-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 8px;
      }

      .news-source {
        color: #848e9c;
        font-size: 0.85em;
      }

      .news-time {
        color: #848e9c;
        font-size: 0.8em;
      }

      .news-headline {
        font-weight: 600;
        line-height: 1.4;
        margin-bottom: 8px;
      }

      .news-sentiment {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 3px;
        font-size: 0.8em;
        font-weight: 600;
      }

      .news-sentiment.positive {
        color: #0ecb81;
        background: rgba(14, 203, 129, 0.1);
      }

      .news-sentiment.negative {
        color: #f6465d;
        background: rgba(246, 70, 93, 0.1);
      }

      .news-sentiment.neutral {
        color: #848e9c;
        background: rgba(132, 142, 156, 0.1);
      }

      /* Ïò§Î•∏Ï™Ω - Í∏∞Ïà†Ï†Å ÏßÄÌëú & ÏïåÎ¶º */
      .indicators-panel {
        background: #1e2329;
        overflow-y: auto;
      }

      .panel-section {
        padding: 15px;
        border-bottom: 1px solid #2b3139;
      }

      .panel-title {
        font-size: 1em;
        font-weight: 700;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .indicator-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #2b3139;
      }

      .indicator-row:last-child {
        border-bottom: none;
      }

      .indicator-name {
        color: #848e9c;
        font-size: 0.9em;
      }

      .indicator-value-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .indicator-value {
        font-weight: 600;
      }

      .indicator-signal {
        padding: 3px 8px;
        border-radius: 3px;
        font-size: 0.75em;
        font-weight: 600;
      }

      .indicator-signal.buy {
        color: #0ecb81;
        background: rgba(14, 203, 129, 0.1);
      }

      .indicator-signal.sell {
        color: #f6465d;
        background: rgba(246, 70, 93, 0.1);
      }

      .indicator-signal.neutral {
        color: #848e9c;
        background: rgba(132, 142, 156, 0.1);
      }

      /* ÏïåÎ¶º Ìå®ÎÑê */
      .alert-item {
        padding: 12px;
        background: #2b3139;
        border-radius: 6px;
        margin-bottom: 8px;
        border-left: 3px solid;
      }

      .alert-item.critical {
        border-left-color: #f6465d;
      }

      .alert-item.warning {
        border-left-color: #f0b90b;
      }

      .alert-item.info {
        border-left-color: #0ecb81;
      }

      .alert-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
      }

      .alert-severity {
        font-size: 0.75em;
        font-weight: 700;
        text-transform: uppercase;
      }

      .alert-time {
        font-size: 0.75em;
        color: #848e9c;
      }

      .alert-message {
        font-size: 0.85em;
        line-height: 1.4;
      }

      /* ÏßÄÏßÄÏÑ†/Ï†ÄÌï≠ÏÑ† */
      .level-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background: #2b3139;
        border-radius: 6px;
        margin-bottom: 8px;
      }

      .level-type {
        font-size: 0.85em;
        font-weight: 600;
      }

      .level-type.resistance {
        color: #f6465d;
      }

      .level-type.support {
        color: #0ecb81;
      }

      .level-price {
        font-weight: 600;
      }

      .level-strength {
        font-size: 0.75em;
        color: #848e9c;
      }

      /* Ïä§ÌÅ¨Î°§Î∞î Ïä§ÌÉÄÏùº */
      ::-webkit-scrollbar {
        width: 6px;
      }

      ::-webkit-scrollbar-track {
        background: #0b0e11;
      }

      ::-webkit-scrollbar-thumb {
        background: #2b3139;
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #474d57;
      }

      /* Î∞òÏùëÌòï */
      @media (max-width: 1200px) {
        .main-layout {
          grid-template-columns: 1fr;
        }

        .market-list,
        .indicators-panel {
          display: none;
        }
      }

      /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .live-indicator {
        display: inline-block;
        width: 8px;
        height: 8px;
        background: #0ecb81;
        border-radius: 50%;
        animation: pulse 2s infinite;
        margin-right: 8px;
      }
    </style>
  </head>
  <body>
    <!-- Ìó§Îçî -->
    <div class="header">
      <div class="logo">
        <span>ü™ô</span>
        <span>CoinTicker</span>
        <span style="font-size: 0.5em; color: #848e9c">LIVE</span>
      </div>
      <div class="header-nav">
        <a href="#" class="nav-item active">Markets</a>
        <a href="#" class="nav-item">Trade</a>
        <a href="#" class="nav-item">News</a>
        <a href="#" class="nav-item">Alerts</a>
        <a href="/cointicker/index.html" class="nav-item">About</a>
      </div>
    </div>

    <!-- Í∞ÄÍ≤© Ìã∞Ïª§ Î∞î -->
    <div class="ticker-bar" id="tickerBar">
      <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
    </div>

    <!-- Î©îÏù∏ Î†àÏù¥ÏïÑÏõÉ -->
    <div class="main-layout">
      <!-- ÏôºÏ™Ω: ÎßàÏºì Î¶¨Ïä§Ìä∏ -->
      <div class="market-list">
        <input
          type="text"
          class="market-search"
          placeholder="üîç Search markets..."
        />
        <div class="market-tabs">
          <div class="market-tab active">USDT</div>
          <div class="market-tab">BTC</div>
          <div class="market-tab">Favorites</div>
        </div>
        <div id="marketList">
          <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
        </div>
      </div>

      <!-- Ï§ëÏïô: Ï∞®Ìä∏ & Îâ¥Ïä§ -->
      <div class="chart-section">
        <div class="chart-header">
          <div class="chart-symbol" id="currentSymbol">BTC/USDT</div>
          <div class="chart-stats">
            <div class="stat-item">
              <span class="stat-label">Price</span>
              <span class="stat-value" id="currentPrice">$43,850.00</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">24h Change</span>
              <span class="stat-value" id="priceChange" style="color: #0ecb81"
                >+2.35%</span
              >
            </div>
            <div class="stat-item">
              <span class="stat-label">24h High</span>
              <span class="stat-value">$44,250.00</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">24h Low</span>
              <span class="stat-value">$42,100.00</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">24h Volume</span>
              <span class="stat-value">$28.5B</span>
            </div>
          </div>
        </div>

        <div class="chart-timeframe">
          <button class="timeframe-btn">1m</button>
          <button class="timeframe-btn">5m</button>
          <button class="timeframe-btn">15m</button>
          <button class="timeframe-btn active">1h</button>
          <button class="timeframe-btn">4h</button>
          <button class="timeframe-btn">1D</button>
          <button class="timeframe-btn">1W</button>
        </div>

        <div class="chart-container">
          <canvas id="priceChart"></canvas>
        </div>

        <div class="news-section">
          <div class="news-title">
            <span class="live-indicator"></span>
            <span>Real-time News Feed</span>
          </div>
          <div id="newsFeed">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
          </div>
        </div>
      </div>

      <!-- Ïò§Î•∏Ï™Ω: Í∏∞Ïà†Ï†Å ÏßÄÌëú & ÏïåÎ¶º -->
      <div class="indicators-panel">
        <div class="panel-section">
          <div class="panel-title">
            <span>üìä</span>
            <span>Technical Indicators</span>
          </div>
          <div id="indicatorsList">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
          </div>
        </div>

        <div class="panel-section">
          <div class="panel-title">
            <span>üìç</span>
            <span>Support & Resistance</span>
          </div>
          <div id="levelsList">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
          </div>
        </div>

        <div class="panel-section">
          <div class="panel-title">
            <span>üîî</span>
            <span>Live Alerts</span>
          </div>
          <div id="alertsList">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
          </div>
        </div>
      </div>
    </div>

    <script>
      // === Ïã§ÏãúÍ∞Ñ API Ïó∞Îèô ÏãúÏä§ÌÖú ===

      // ÎßàÏºì Îç∞Ïù¥ÌÑ∞ (APIÏóêÏÑú Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏)
      let markets = [];

      const indicators = [
        {
          name: "RSI(14)",
          value: "48.94",
          signal: "neutral",
          color: "#848e9c",
        },
        { name: "MACD", value: "-53.28", signal: "buy", color: "#0ecb81" },
        {
          name: "ADX(14)",
          value: "19.20",
          signal: "neutral",
          color: "#848e9c",
        },
        {
          name: "Williams %R",
          value: "-38.39",
          signal: "neutral",
          color: "#848e9c",
        },
        {
          name: "CCI(14)",
          value: "-17.58",
          signal: "neutral",
          color: "#848e9c",
        },
        { name: "ROC(12)", value: "0.92", signal: "buy", color: "#0ecb81" },
        {
          name: "ATR(14)",
          value: "125.50",
          signal: "neutral",
          color: "#848e9c",
        },
        {
          name: "Stoch RSI",
          value: "65.2",
          signal: "neutral",
          color: "#848e9c",
        },
      ];

      const levels = [
        { type: "resistance", price: 45200, strength: "Strong" },
        { type: "resistance", price: 44800, strength: "Medium" },
        { type: "support", price: 43200, strength: "Strong" },
        { type: "support", price: 42500, strength: "Medium" },
      ];

      const alerts = [
        {
          severity: "critical",
          time: "2m ago",
          message: "BTC broke resistance at $44,000",
        },
        {
          severity: "warning",
          time: "15m ago",
          message: "MACD golden cross detected",
        },
        {
          severity: "info",
          time: "32m ago",
          message: "Volume spike: +45% in last hour",
        },
        {
          severity: "warning",
          time: "1h ago",
          message: "RSI approaching overbought (68.5)",
        },
      ];

      // Îâ¥Ïä§ Îç∞Ïù¥ÌÑ∞ (APIÏóêÏÑú Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏)
      let news = [];

      let chartInstance = null;
      let currentSymbol = "BTCUSDT";

      // === Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Ìï®ÏàòÎì§ ===

      // 1. CoinGecko API - Ïã§ÏãúÍ∞Ñ Í∞ÄÍ≤© Îç∞Ïù¥ÌÑ∞
      async function fetchCoinGeckoPrices() {
        try {
          const response = await fetch(
            "https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=8&page=1&sparkline=false&price_change_percentage=24h"
          );
          const data = await response.json();

          // CoinGecko Îç∞Ïù¥ÌÑ∞Î•º Ïö∞Î¶¨ Ìè¨Îß∑ÏúºÎ°ú Î≥ÄÌôò
          markets = data.map((coin) => {
            const symbolMap = {
              bitcoin: "BTC/USDT",
              ethereum: "ETH/USDT",
              binancecoin: "BNB/USDT",
              solana: "SOL/USDT",
              cardano: "ADA/USDT",
              ripple: "XRP/USDT",
              polkadot: "DOT/USDT",
              dogecoin: "DOGE/USDT",
            };

            return {
              symbol: symbolMap[coin.id] || coin.symbol.toUpperCase() + "/USDT",
              price: coin.current_price,
              change: coin.price_change_percentage_24h || 0,
              volume: formatVolume(coin.total_volume),
            };
          });

          renderTickerBar();
          renderMarketList();
        } catch (error) {
          console.error("CoinGecko API ÏóêÎü¨:", error);
        }
      }

      // 2. Binance API - Ï∫îÎì§Ïä§Ìã± Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞
      async function fetchBinanceKlines(
        symbol = "BTCUSDT",
        interval = "1h",
        limit = 100
      ) {
        try {
          const response = await fetch(
            `https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=${interval}&limit=${limit}`
          );
          const data = await response.json();

          // Binance Ï∫îÎì§ Îç∞Ïù¥ÌÑ∞ ÌååÏã±
          const candleData = data.map((candle) => ({
            x: new Date(candle[0]),
            o: parseFloat(candle[1]),
            h: parseFloat(candle[2]),
            l: parseFloat(candle[3]),
            c: parseFloat(candle[4]),
          }));

          updateChart(candleData);
        } catch (error) {
          console.error("Binance API ÏóêÎü¨:", error);
        }
      }

      // 3. Binance API - 24ÏãúÍ∞Ñ Í∞ÄÍ≤© ÌÜµÍ≥Ñ
      async function fetchBinance24hrStats(symbol = "BTCUSDT") {
        try {
          const response = await fetch(
            `https://api.binance.com/api/v3/ticker/24hr?symbol=${symbol}`
          );
          const data = await response.json();

          // ÌòÑÏû¨ Í∞ÄÍ≤© Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
          document.getElementById("currentPrice").textContent =
            "$" + parseFloat(data.lastPrice).toLocaleString();
          document.getElementById("priceChange").textContent =
            (data.priceChangePercent >= 0 ? "+" : "") +
            parseFloat(data.priceChangePercent).toFixed(2) +
            "%";
          document.getElementById("priceChange").style.color =
            data.priceChangePercent >= 0 ? "#0ecb81" : "#f6465d";
        } catch (error) {
          console.error("Binance 24hr ÌÜµÍ≥Ñ ÏóêÎü¨:", error);
        }
      }

      // 4. CryptoCompare API - Ïã§ÏãúÍ∞Ñ Îâ¥Ïä§
      async function fetchCryptoNews() {
        try {
          const response = await fetch(
            "https://min-api.cryptocompare.com/data/v2/news/?lang=EN&categories=BTC,ETH"
          );
          const result = await response.json();

          if (result.Data) {
            news = result.Data.slice(0, 6).map((item) => {
              const timeDiff = Math.floor(
                (Date.now() / 1000 - item.published_on) / 60
              );
              const timeAgo =
                timeDiff < 60
                  ? `${timeDiff} min ago`
                  : `${Math.floor(timeDiff / 60)} hours ago`;

              // Í∞ÑÎã®Ìïú Í∞êÏÑ± Î∂ÑÏÑù (ÌÇ§ÏõåÎìú Í∏∞Î∞ò)
              let sentiment = "neutral";
              const title = item.title.toLowerCase();
              if (
                title.includes("surge") ||
                title.includes("rise") ||
                title.includes("bull") ||
                title.includes("gain")
              ) {
                sentiment = "positive";
              } else if (
                title.includes("fall") ||
                title.includes("drop") ||
                title.includes("bear") ||
                title.includes("crash")
              ) {
                sentiment = "negative";
              }

              return {
                source: item.source_info.name,
                time: timeAgo,
                headline: item.title,
                sentiment: sentiment,
                url: item.url,
              };
            });

            renderNews();
          }
        } catch (error) {
          console.error("CryptoCompare Îâ¥Ïä§ ÏóêÎü¨:", error);
        }
      }

      // Ìó¨Ìçº Ìï®ÏàòÎì§
      function formatVolume(volume) {
        if (volume >= 1e9) return (volume / 1e9).toFixed(1) + "B";
        if (volume >= 1e6) return (volume / 1e6).toFixed(0) + "M";
        return volume.toLocaleString();
      }

      function updateChart(candleData) {
        if (chartInstance) {
          chartInstance.data.datasets[0].data = candleData;
          chartInstance.update("none");
        }
      }

      // Ìã∞Ïª§ Î∞î Î†åÎçîÎßÅ
      function renderTickerBar() {
        const tickerBar = document.getElementById("tickerBar");
        tickerBar.innerHTML = markets
          .map(
            (m) => `
          <div class="ticker-item">
            <span class="ticker-symbol">${m.symbol}</span>
            <span class="ticker-price">$${m.price.toLocaleString()}</span>
            <span class="ticker-change ${m.change >= 0 ? "up" : "down"}">
              ${m.change >= 0 ? "+" : ""}${m.change}%
            </span>
          </div>
        `
          )
          .join("");
      }

      // ÎßàÏºì Î¶¨Ïä§Ìä∏ Î†åÎçîÎßÅ
      function renderMarketList() {
        const marketList = document.getElementById("marketList");
        marketList.innerHTML = markets
          .map(
            (m, i) => `
          <div class="market-item ${i === 0 ? "active" : ""}">
            <div>
              <div class="market-symbol">${m.symbol}</div>
              <div style="font-size: 0.8em; color: #848e9c;">Vol ${
                m.volume
              }</div>
            </div>
            <div class="market-price">
              <div class="market-price-value">$${m.price.toLocaleString()}</div>
              <div style="font-size: 0.8em; color: ${
                m.change >= 0 ? "#0ecb81" : "#f6465d"
              }">
                ${m.change >= 0 ? "+" : ""}${m.change}%
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      // Í∏∞Ïà†Ï†Å ÏßÄÌëú Î†åÎçîÎßÅ
      function renderIndicators() {
        const indicatorsList = document.getElementById("indicatorsList");
        indicatorsList.innerHTML = indicators
          .map(
            (ind) => `
          <div class="indicator-row">
            <span class="indicator-name">${ind.name}</span>
            <div class="indicator-value-group">
              <span class="indicator-value" style="color: ${ind.color}">${
              ind.value
            }</span>
              <span class="indicator-signal ${
                ind.signal
              }">${ind.signal.toUpperCase()}</span>
            </div>
          </div>
        `
          )
          .join("");
      }

      // ÏßÄÏßÄÏÑ†/Ï†ÄÌï≠ÏÑ† Î†åÎçîÎßÅ
      function renderLevels() {
        const levelsList = document.getElementById("levelsList");
        levelsList.innerHTML = levels
          .map(
            (level) => `
          <div class="level-item">
            <span class="level-type ${level.type}">
              ${level.type === "resistance" ? "R" : "S"}
            </span>
            <span class="level-price">$${level.price.toLocaleString()}</span>
            <span class="level-strength">${level.strength}</span>
          </div>
        `
          )
          .join("");
      }

      // ÏïåÎ¶º Î†åÎçîÎßÅ
      function renderAlerts() {
        const alertsList = document.getElementById("alertsList");
        alertsList.innerHTML = alerts
          .map(
            (alert) => `
          <div class="alert-item ${alert.severity}">
            <div class="alert-header">
              <span class="alert-severity" style="color: ${
                alert.severity === "critical"
                  ? "#f6465d"
                  : alert.severity === "warning"
                  ? "#f0b90b"
                  : "#0ecb81"
              }">
                ${alert.severity}
              </span>
              <span class="alert-time">${alert.time}</span>
            </div>
            <div class="alert-message">${alert.message}</div>
          </div>
        `
          )
          .join("");
      }

      // Îâ¥Ïä§ ÌîºÎìú Î†åÎçîÎßÅ
      function renderNews() {
        const newsFeed = document.getElementById("newsFeed");
        newsFeed.innerHTML = news
          .map(
            (item) => `
          <div class="news-item">
            <div class="news-header">
              <span class="news-source">${item.source}</span>
              <span class="news-time">${item.time}</span>
            </div>
            <div class="news-headline">${item.headline}</div>
            <span class="news-sentiment ${item.sentiment}">
              ${
                item.sentiment === "positive"
                  ? "üìà Bullish"
                  : item.sentiment === "negative"
                  ? "üìâ Bearish"
                  : "üìä Neutral"
              }
            </span>
          </div>
        `
          )
          .join("");
      }

      // Chart.js Ï∫îÎì§Ïä§Ìã± Ï∞®Ìä∏ Ï¥àÍ∏∞Ìôî
      function initChart() {
        const ctx = document.getElementById("priceChart").getContext("2d");

        chartInstance = new Chart(ctx, {
          type: "candlestick",
          data: {
            datasets: [
              {
                label: currentSymbol,
                data: [],
                color: {
                  up: "#0ecb81",
                  down: "#f6465d",
                  unchanged: "#848e9c",
                },
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                backgroundColor: "#1e2329",
                titleColor: "#eaecef",
                bodyColor: "#eaecef",
                borderColor: "#2b3139",
                borderWidth: 1,
              },
            },
            scales: {
              x: {
                type: "time",
                time: {
                  unit: "hour",
                },
                grid: {
                  color: "#2b3139",
                },
                ticks: {
                  color: "#848e9c",
                },
              },
              y: {
                grid: {
                  color: "#2b3139",
                },
                ticks: {
                  color: "#848e9c",
                },
              },
            },
          },
        });

        // Ï¥àÍ∏∞ Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        fetchBinanceKlines(currentSymbol);
      }

      // Ï¥àÍ∏∞Ìôî Î∞è Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
      document.addEventListener("DOMContentLoaded", async function () {
        console.log("üöÄ CoinTicker Live Dashboard ÏãúÏûë - Ïã§ÏãúÍ∞Ñ API Ïó∞Îèô");

        // Ï¥àÍ∏∞ Î†åÎçîÎßÅ
        renderIndicators();
        renderLevels();
        renderAlerts();
        initChart();

        // Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        await Promise.all([
          fetchCoinGeckoPrices(),
          fetchBinance24hrStats(currentSymbol),
          fetchCryptoNews(),
        ]);

        // Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ (30Ï¥àÎßàÎã§)
        setInterval(async () => {
          console.log("üîÑ Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë...");
          await fetchCoinGeckoPrices();
          await fetchBinance24hrStats(currentSymbol);
        }, 30000);

        // Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ (1Î∂ÑÎßàÎã§)
        setInterval(() => {
          fetchBinanceKlines(currentSymbol);
        }, 60000);

        // Îâ¥Ïä§ ÏóÖÎç∞Ïù¥Ìä∏ (5Î∂ÑÎßàÎã§)
        setInterval(() => {
          fetchCryptoNews();
        }, 300000);

        console.log("‚úÖ Ïã§ÏãúÍ∞Ñ API Ïó∞Îèô ÏôÑÎ£å!");
        console.log("üìä CoinGecko: Í∞ÄÍ≤© Îç∞Ïù¥ÌÑ∞");
        console.log("üìà Binance: Ï∫îÎì§Ïä§Ìã± Ï∞®Ìä∏");
        console.log("üì∞ CryptoCompare: Îâ¥Ïä§ ÌîºÎìú");
      });
    </script>
  </body>
</html>
